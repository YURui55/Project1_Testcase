import requests
from test_case.test_boke import test_boke
from common.get_sql import getsql


'''
url="https://mbd.baidu.com/ztbox?action=zpblog&appname=pcsearch&sid=61669_62325_63143_63326_63582_63629_63685_63692_63724_63716_63275_63798_63881_63902_63949_63947&v=2.0&data=%7B%22cateid%22%3A%2299%22%2C%22actiondata%22%3A%7B%22id%22%3A18463%2C%22type%22%3A%220%22%2C%22timestamp%22%3A1751870653308%2C%22content%22%3A%7B%22page%22%3A%22home%22%2C%22source%22%3A%22%22%2C%22from%22%3A%22search%22%2C%22type%22%3A%22click%22%2C%22value%22%3A%22search_kuang%22%2C%22ext%22%3A%7B%22qid%22%3A%22dad36046004b6cd8%22%2C%22rsv_dl%22%3A%22tb%22%2C%22pos%22%3A%22se_btn%22%2C%22query%22%3A%22baidu%22%7D%7D%7D%7D"
请求方法：post
请求参数：json_data={
    "action":"zpblog",
    "sid":"61669_62325_63143_63326_63582_63629_63685_63692_63724_63716_63275_63798_63881_63902_63949_63947",
    "v":"2.0",
    "data":"{"cateid":"99","actiondata":{"id":18463,"type":"0","timestamp":1751869957944,"content":{"page":"home","source":"","from":"search","type":"click","value":"search_kuang","ext":{"qid":"","rsv_dl":"","pos":"se_btn","query":"baidu"}}}}"
    
}
cookies={
    "cookie":"MCITY=-317%3A179%3A; BAIDUID_BFESS=31869DE63E0535B675E4313640FD698C:FG=1; BDUSS=Bya05aSzZHR3hYc0wzaHN4NHVxSFBtN1JjdXBBbW1DOC1WTHdtU1lLem1LRmhuSVFBQUFBJCQAAAAAAAAAAAEAAABWw1ErdzYzNDczMzM5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOabMGfmmzBnbz; BDUSS_BFESS=Bya05aSzZHR3hYc0wzaHN4NHVxSFBtN1JjdXBBbW1DOC1WTHdtU1lLem1LRmhuSVFBQUFBJCQAAAAAAAAAAAEAAABWw1ErdzYzNDczMzM5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOabMGfmmzBnbz; PSTM=1734016017; BIDUPSID=FC089471AC3B4AF871C06DF8FEDF2789; ZFY=b1WDFDnlRcZc:AmPRBZS21GRalTCL:AxhoU4dUSncL:BZk:C; H_WISE_SIDS=110085_1991830_626068_628198_632031_632164_633618_636706_636081_641767_641765_642950_643586_644663_644644_645090_644900_644372_645170_645434_645924_646541_646556_646967_646972_646339_646774_647614_647630_647658_647710_647694_647902_644402_647926_647962_648145_648252_648243_645031_648395_648404_648397_648454_648452_648466_648465_648471_648479_648476_648450_648500_648475_648498_648504_648507_648473_648459_648431_648446_646860_648654_648593_648727_648733_648736_648847_648855_649003_649054_649073_649050_649059_649018_648983_649038_649162_649236_649325_649355_649404_641261_649340_649493_649533_649589_644053_649658_649651_649233_649714_649755_649775_649809_649868_649776_649910_649926_649960_649937_649932; H_WISE_SIDS_BFESS=110085_1991830_626068_628198_632031_632164_633618_636706_636081_641767_641765_642950_643586_644663_644644_645090_644900_644372_645170_645434_645924_646541_646556_646967_646972_646339_646774_647614_647630_647658_647710_647694_647902_644402_647926_647962_648145_648252_648243_645031_648395_648404_648397_648454_648452_648466_648465_648471_648479_648476_648450_648500_648475_648498_648504_648507_648473_648459_648431_648446_646860_648654_648593_648727_648733_648736_648847_648855_649003_649054_649073_649050_649059_649018_648983_649038_649162_649236_649325_649355_649404_641261_649340_649493_649533_649589_644053_649658_649651_649233_649714_649755_649775_649809_649868_649776_649910_649926_649960_649937_649932; BAIDU_WISE_UID=wapp_1745056424679_970; __bid_n=189c66377a77472ce8dc3b; RT="z=1&dm=baidu.com&si=35f9a79d-602b-451f-9add-96c58c32e3e5&ss=mcp1bvmk&sl=2&tt=30j&bcn=https%3A%2F%2Ffclog.baidu.com%2Flog%2Fweirwood%3Ftype%3Dperf&ld=3tn&ul=116f&hd=116y"; H_PS_PSSID=61669_62325_63143_63326_63582_63629_63685_63692_63724_63716_63275_63798_63881_63902_63949_63947; BA_HECTOR=058kak0l0la401a0al210h00ag8k221k6mqff25; BDRCVFR[feWj1Vr5u3D]=I67x6TjHwwYf0; PSINO=3"
}
'''

url = "https://www.baidu.com/s?"
sql = 'select * from mydatabase.student'
sql_1= getsql(sql)[1][1]
params={
    #'wd':test_boke()[0],
    'wd':sql_1,
    'rsv_spt':1,
    'rsv_iqid':'0xcdf67a5700358693',
    'issp':1,
    'f':8,
    'rsv_bp':1,
    'rsv_idx':2,
    'ie':'utf-8',
    'tn':'68018901_58_oem_dg',
    'rsv_dl':'ib',
    'rsv_enter':1,
    'rsv_sug3':8,
    'rsv_sug1':6,
    'rsv_sug7':100,
    'rsv_btype':'t',
    'prefixsug':'%E4%BD%A0%E5%A5%BD',
    'rsp':6,
    'inputT':6783,
    'rsv_sug4':22468
}
cookies={
    'cookie':'MCITY=-317%3A179%3A; BAIDUID_BFESS=31869DE63E0535B675E4313640FD698C:FG=1; BDUSS=Bya05aSzZHR3hYc0wzaHN4NHVxSFBtN1JjdXBBbW1DOC1WTHdtU1lLem1LRmhuSVFBQUFBJCQAAAAAAAAAAAEAAABWw1ErdzYzNDczMzM5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOabMGfmmzBnbz; BDUSS_BFESS=Bya05aSzZHR3hYc0wzaHN4NHVxSFBtN1JjdXBBbW1DOC1WTHdtU1lLem1LRmhuSVFBQUFBJCQAAAAAAAAAAAEAAABWw1ErdzYzNDczMzM5AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOabMGfmmzBnbz; PSTM=1734016017; BIDUPSID=FC089471AC3B4AF871C06DF8FEDF2789; ZFY=b1WDFDnlRcZc:AmPRBZS21GRalTCL:AxhoU4dUSncL:BZk:C; H_WISE_SIDS=110085_1991830_626068_628198_632031_632164_633618_636706_636081_641767_641765_642950_643586_644663_644644_645090_644900_644372_645170_645434_645924_646541_646556_646967_646972_646339_646774_647614_647630_647658_647710_647694_647902_644402_647926_647962_648145_648252_648243_645031_648395_648404_648397_648454_648452_648466_648465_648471_648479_648476_648450_648500_648475_648498_648504_648507_648473_648459_648431_648446_646860_648654_648593_648727_648733_648736_648847_648855_649003_649054_649073_649050_649059_649018_648983_649038_649162_649236_649325_649355_649404_641261_649340_649493_649533_649589_644053_649658_649651_649233_649714_649755_649775_649809_649868_649776_649910_649926_649960_649937_649932; H_WISE_SIDS_BFESS=110085_1991830_626068_628198_632031_632164_633618_636706_636081_641767_641765_642950_643586_644663_644644_645090_644900_644372_645170_645434_645924_646541_646556_646967_646972_646339_646774_647614_647630_647658_647710_647694_647902_644402_647926_647962_648145_648252_648243_645031_648395_648404_648397_648454_648452_648466_648465_648471_648479_648476_648450_648500_648475_648498_648504_648507_648473_648459_648431_648446_646860_648654_648593_648727_648733_648736_648847_648855_649003_649054_649073_649050_649059_649018_648983_649038_649162_649236_649325_649355_649404_641261_649340_649493_649533_649589_644053_649658_649651_649233_649714_649755_649775_649809_649868_649776_649910_649926_649960_649937_649932; MSA_WH=2428_1330; BAIDU_WISE_UID=wapp_1745056424679_970; channel=baidusearch; BD_UPN=12314753; baikeVisitId=acb19cbe-a528-4d14-b2cb-855e54e6e0da; COOKIE_SESSION=1544286_2_5_7_4_10_1_0_5_3_3_2_609063_0_0_0_1734016139_1729341925_1751871594%7C9%2386330_17_1729341923%7C9; __bid_n=197e56419695312395cdd3; RT="z=1&dm=baidu.com&si=35f9a79d-602b-451f-9add-96c58c32e3e5&ss=mct85y4z&sl=5&tt=4b5&bcn=https%3A%2F%2Ffclog.baidu.com%2Flog%2Fweirwood%3Ftype%3Dperf&ld=804&ul=8lo&hd=8ls"; ZD_ENTRY=bing; BDRCVFR[BIVAaPonX6T]=-_EV5wtlMr0mh-8uz4WUvY; H_PS_PSSID=61669_62325_63143_63326_63582_63692_63724_63716_63275_63798_63881_63902_63949_63947_63994; BA_HECTOR=a58ka4a02k2h8g21840004ah8k8ka31k6shbu24; WWW_ST=1752057242619'
}
def test_baidu():
    response_baidu = requests.get(url=url,cookies=cookies,verify=False,params=params)
    #print(response_baidu.json())
    print(response_baidu.text.encode('utf8'))
    print(response_baidu.status_code)
    print(response_baidu.url)
    assert response_baidu.status_code==200,'响应状态正确200'
    if response_baidu.status_code ==200:
        print('成功')
    else:
        print("失败")

    print(response_baidu.cookies)




